server {
	listen 80; ## listen for ipv4; this line is default and implied
	listen 443 ssl;
	ssl_certificate /etc/ssl/cacert.pem;        # path to your cacert.pem
	ssl_certificate_key /etc/ssl/privkey.pem;    # path to your privkey.pem
	server_tokens off;

	# ssl on;
	#listen   [::]:80 default ipv6only=on; ## listen for ipv6
	root /var/www-download/;
	# index index.html index.htm;

	server_name xxx.osmand.net; #!!!

	location ~ ^/(download|download.php) {
		# add_header Content-Disposition "attachment; filename=$arg_file";
		if ($arg_srtmcountry) {
			rewrite ^ /srtm-countries/$arg_file last;
		}
		if ($arg_aosmc) {
			rewrite ^ /aosmc/$arg_file last;
		}
		if ($arg_srtm) {
			rewrite ^ /srtm/$arg_file last;
		}
		if ($arg_road) {
			rewrite ^ /road-indexes/$arg_file last;
		}
		if ($arg_wikivoyage) {
			rewrite ^ /wikivoyage/$arg_file last;
		}
		if ($arg_wiki) {
			rewrite ^ /wiki/$arg_file last;
		}
		if ($arg_hillshade) {
			rewrite ^ /hillshade/$arg_file last;
		}
		rewrite ^ /indexes/$arg_file last;
	}

	
	location / {
		try_files $uri $uri/ =404;
	}	

	# deny access to .htaccess files, if Apache's document root
	location ~ /\.ht {
		deny all;
	}
}
